<script type="">
/*
	##할일관리 애플리케이션
	1. 코드흐름
		(1) 할일을 추가할 수 있는 어플리케이션이다.
		(2) todo(해야할 일), doing(현재 하는일), done(다한 일) 세가지 상태로 나눠진다.
		(3) 할일이 추가될 때마다 해당할 일에 id값이 생성된다.
		(4) command함수를 이용해 3가지 동작을 수행할 수 있다.
			- command("add$자바스크립트공부하기") : 자바스크립트공부하기라는 항목이 추가된다.
			- command("show$doing") : doing항목의 아이디값과 task값을 보여준다.
			- update("update$3$done") : 아이디가 3인 task를 done이라는 상태로 업데이트한다.
	2. 변수지정
		(1) todoList : status값(todo인지 doing인지 상태를 나타내줌), id값, task값(할일의 값)을 배열의 형태로 담고있다.
		(2) command() : 함수가 호출될 때 인자값에 해당하는 동작을 수행한다.(add, show, update)
		(3) add() : 할일을 추가하는 동작을 수행한다.
		(4) show() : 인자로 받은 status의 항목의 id값과 task값을 모두 보여준다.
		(5) update() : 인자로 id값과 status값을 받고 아이디에 해당하는 데이터의 status값을 인자로 받은 status값으로 update한다.
*/
const todoApp = {
	todoList : [],
	MSG : {
		add(task){ console.log(`id : ${this.todoList.length}, "${task}"이 추가되었습니다.`)},
		show(status){
			const showMessage = todoApp.todoList.reduce((prev, curr) => {
				if(curr.status === status){
				 return prev.concat(`"${curr.id}, ${curr.task}"`)
				}else return prev;
			},[]).join(", ");
			console.log(showMessage);
		},
		currentStatus(){
			let status = {todo : 0, doing : 0, done : 0};
			this.todoList.forEach(v => (status[v.status]++));
			console.log(`현재상태 : todo : ${status.todo}개, doing : ${status.doing}개, done : ${status.done}개,`);
		}
	},
	command(inputString){
		let [functionName, parameterFirstValue, parameterSecondValue] = inputString.split("$");
		this[functionName](parameterFirstValue,parameterSecondValue);
	},
	add(task){
		this.todoList.push({id : this.todoList.length+1, status : "todo", task : task });
		this.MSG.add.call(todoApp, task);
		this.MSG.currentStatus.call(todoApp);
	},
	show(status){
		this.MSG.show.call(todoApp, status);
	},
	update(id, status){
		this.todoList.some(v=>{
			if(v.id == id) v.status = status;
			return v.id == id;
		});
		this.MSG.currentStatus.call(todoApp);
	}
}

todoApp.command("add$자바스크립트공부하기");
todoApp.command("add$자바공부하기");
todoApp.command("add$ios공부하기");
todoApp.command("show$todo");
todoApp.command("update$2$doing");
todoApp.command("show$doing");
todoApp.command("update$2$done");
todoApp.command("show$done");
</script>

