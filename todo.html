<script type="">
/*
	##할일관리 애플리케이션
	1. 코드흐름
		(1) 할일을 추가할 수 있는 어플리케이션이다.
		(2) todo(해야할 일), doing(현재 하는일), done(다한 일) 세가지 상태로 나눠진다.
		(3) 할일이 추가될 때마다 해당할 일에 id값이 생성된다.
		(4) command함수를 이용해 3가지 동작을 수행할 수 있다.
			- command("add$자바스크립트공부하기") : 자바스크립트공부하기라는 항목이 추가된다.
			- command("show$doing") : doing항목의 아이디값과 task값을 보여준다.
			- update("update$3$done") : 아이디가 3인 task를 done이라는 상태로 업데이트한다.
	2. 변수지정
		(1) todoList : status값(todo인지 doing인지 상태를 나타내줌), id값, task값(할일의 값)을 배열의 형태로 담고있다.
		(2) command() : 함수가 호출될 때 인자값에 해당하는 동작을 수행한다.(add, show, update)
		(3) add() : 할일을 추가하는 동작을 수행한다.
		(4) show() : 인자로 받은 status의 항목의 id값과 task값을 모두 보여준다.
		(5) update() : 인자로 id값과 status값을 받고 아이디에 해당하는 데이터의 status값을 인자로 받은 status값으로 update한다.
*/

let todoList = [];

let MSG = {
	add : function(task){console.log(`id : ${todoList.length}, "${task}"이 추가되었습니다`)},
	show : function(status){
		const str = todoList.reduce((prev, curr) => {
			if(curr.status === status) return prev.concat(`"${curr.id}, ${curr.task}"`);
		},[]).join(", ");
		console.log(str);
	},
	currentStatus : function (){
		let todo = 0;
		let doing = 0;
		let done = 0;
		todoList.forEach(v => {
			switch(v.status){
				case "todo" : todo++;
				break;
				case "doing" : doing++;
				break;
				case "done" : done++;
				break;
			}
		})
		console.log(`현재상태 : todo : ${todo}개, doing : ${doing}개, done : ${done}개,`);
	}
}

function command(str){
	let [functionName, parameterFirstValue, parameterSecondValue] = str.split("$");
	eval(functionName + `(parameterFirstValue, parameterSecondValue)`);
}
function add(task){
	todoList.push({id : todoList.length+1, status : "todo", task : task });
	MSG.add(task);
	MSG.currentStatus();
}
function show(status){
	MSG.show(status);
}
function update(id, status){
	todoList.some(v=>{
		if(v.id == id) v.status = status;
		return v.id == id;
	});
	MSG.currentStatus();
}

command("add$자바스크립트공부하기");
command("add$자바공부하기");
command("add$ios공부하기");
command("show$todo");
command("update$2$doing");
command("show$doing");
command("update$2$done");
command("show$done");
</script>

